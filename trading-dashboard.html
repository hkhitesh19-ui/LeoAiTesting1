<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model E | Institutional Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d0e12; color: #e2e8f0; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); transition: all 0.3s ease; }
        .glass:hover { border-color: rgba(34, 211, 238, 0.4); box-shadow: 0 0 20px rgba(34, 211, 238, 0.1); }
        .neon-text { text-shadow: 0 0 8px rgba(34, 211, 238, 0.6); }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
            <div>
                <h1 class="text-4xl font-black tracking-tighter neon-text text-cyan-400">MODEL E</h1>
                <p class="text-xs uppercase tracking-[0.3em] text-gray-500 font-bold">Institutional Trading Engine</p>
            </div>
            <div id="status-badge" class="px-4 py-2 rounded-full glass text-xs font-bold text-green-400 flex items-center gap-2">
                <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span></span>
                ENGINE LIVE
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="glass p-6 rounded-3xl">
                <p class="text-[10px] text-gray-500 uppercase font-bold mb-4 tracking-widest">Market Volatility (VIX)</p>
                <h3 id="vix" class="text-3xl font-mono font-bold text-white">--.--</h3>
            </div>
            <div class="glass p-6 rounded-3xl">
                <p class="text-[10px] text-gray-500 uppercase font-bold mb-4 tracking-widest">Active Scaling Gear</p>
                <h3 id="gear" class="text-3xl font-mono font-bold text-orange-400">Neutral</h3>
            </div>
            <div class="glass p-6 rounded-3xl">
                <p class="text-[10px] text-gray-500 uppercase font-bold mb-4 tracking-widest">Friction Journal</p>
                <h3 class="text-3xl font-mono font-bold text-red-500">-8.00 Pts</h3>
            </div>
            <div class="glass p-6 rounded-3xl">
                <p class="text-[10px] text-gray-500 uppercase font-bold mb-4 tracking-widest">Current Net Equity</p>
                <h3 id="equity" class="text-3xl font-mono font-bold text-green-400">â‚¹ 5,00,000</h3>
            </div>
        </div>

        <div class="mt-10 text-center">
            <p id="heartbeat" class="text-[10px] text-gray-600 font-mono italic uppercase">Awaiting Data Sync...</p>
        </div>
    </div>

    <script>
        async function fetchStatus() {
            try {
                const res = await fetch('/get_status');
                const data = await res.json();
                
                // Update VIX
                const vixValue = data.currentVix || data.vix || data.modelE?.vix || 0;
                document.getElementById('vix').innerText = vixValue.toFixed(2);
                
                // Update Gear
                const gearStatus = data.gearStatus || data.gear_status || data.modelE?.gearStatus || 'Neutral';
                document.getElementById('gear').innerText = gearStatus;
                
                // Update Equity (if available)
                if (data.equity) {
                    document.getElementById('equity').innerText = data.equity;
                }
                
                // Update Heartbeat
                const engineStatus = data.model_e_active !== false ? 'READY' : 'ERROR';
                document.getElementById('heartbeat').innerText = `Sync: ${new Date().toLocaleTimeString()} | Engine: ${engineStatus}`;
            } catch (err) {
                document.getElementById('heartbeat').innerText = "CONNECTION LOST";
                console.error('Status fetch error:', err);
            }
        }
        setInterval(fetchStatus, 3000);
        fetchStatus();
    </script>
</body>
</html>
